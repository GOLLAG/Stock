

import requests
from bs4 import BeautifulSoup

# URL of the MarketWatch search results page
url = 'https://www.marketwatch.com/search?q=gtl%20infrastructure&ts=0&tab=All%20News'

# Define headers to mimic a browser request
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
}

# Send a request to fetch the HTML content
response = requests.get(url, headers=headers)
response.raise_for_status()  # Check for request errors

# Parse the HTML content
soup = BeautifulSoup(response.text, 'html.parser')

# Find and print the latest headlines
# The class names may vary; use the class names from the inspection step
articles = soup.find_all('a', class_='link')  # Example class name, adjust if needed

for article in articles:
    title = article.get_text(strip=True)
    link = article.get('href')
    if link.startswith('/'):
        link = 'https://www.marketwatch.com' + link
    print(f"Title: {title}")
    print(f"Link: {link}")
    print('-' * 80)
